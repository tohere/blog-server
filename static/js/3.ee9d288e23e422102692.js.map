{"version":3,"sources":["webpack:///src/views/main/index.vue","webpack:///./src/views/main/index.vue?7948","webpack:///./src/views/main/index.vue"],"names":["main","data","articles","page","count","cate","loading","created","this","methods","getArticlesData","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","_ref$data","wrap","_context","prev","next","Object","getData","sent","map","item","pubTime","tool","stop","pageChange","index","_this2","_callee2","_ref2","_context2","watch","$route","handler","console","log","fullPath","split","name","deep","immediate","views_main","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticClass","_l","article","key","_id","attrs","type","justify","align","staticStyle","width","tag","to","path","span","_v","_s","title","scan","imgs","src","alt","_e","background","layout","total","on","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.ee9d288e23e422102692.js","sourcesContent":["<template>\r\n  <!-- 页面：主题内容部分 -->\r\n  <el-card class=\"box-card\" v-loading=\"loading\">\r\n    <el-row type=\"flex\" justify=\"space-between\" align=\"middle\" v-for=\"article in articles\" :key=\"article._id\">\r\n      <router-link tag=\"div\" :to=\"{ path: '/article/' + article._id }\" style=\"width: 100%\">\r\n        <el-col :span=\"18\">\r\n          <h2 class=\"ellipsis\">{{ article.title }}</h2>\r\n          <time>{{ article.pubTime }}</time>\r\n          <span class=\"readNums\"><i class=\"el-icon-view\"></i> {{ article.scan }}</span>\r\n        </el-col>\r\n        <el-col :span=\"2\">\r\n          <img :src=\"article.imgs[0]\" v-if=\"article.imgs && article.imgs[0]\" alt=\"\">\r\n        </el-col>\r\n      </router-link>\r\n    </el-row>\r\n    <el-pagination\r\n      background\r\n      v-show=\"count > 10\"\r\n      layout=\"prev, pager, next\"\r\n      @current-change='pageChange'\r\n      :total=\"count\">\r\n    </el-pagination>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { getArticlesByClassify } from '@/api/getData'\r\nimport { formatTime } from '@/utils/tool'\r\nexport default {\r\n  data () {\r\n    return {\r\n      articles: [], // 文章集合\r\n      page: 1,\r\n      count: 0,\r\n      cate: '', // 分类\r\n      loading: true\r\n    }\r\n  },\r\n  created () {\r\n    this.loading = true\r\n  },\r\n  methods: {\r\n    async getArticlesData (cate) {\r\n      this.loading = true\r\n      const {data: {articles, count}} = await getArticlesByClassify(cate, this.page)\r\n      articles.map(item => {\r\n        item.pubTime = formatTime(item.pubTime)\r\n      })\r\n      this.articles = articles\r\n      this.count = count\r\n      this.loading = false\r\n    },\r\n    /**\r\n     * @Author: tomorrow-here\r\n     * @Date: 2019-01-23 23:11:11\r\n     * @Desc: 分页改变时触发\r\n     */\r\n    async pageChange (index) {\r\n      this.loading = true\r\n      const { data: { articles } } = await getArticlesByClassify(this.cate, index)\r\n      this.articles = articles\r\n      this.loading = false\r\n    }\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler () {\r\n        console.log(this.$route.fullPath.split('/')[1]) // 刚加载页面，路由监听就会触发，这样可以不用eventBus去触发事件，eventBus有个bug就是会多次触发，虽说可以消除这个问题，但是又会随之产生其他问题\r\n        if (this.$route.name === 'main') {\r\n          this.page = 1\r\n          const cate = this.$route.fullPath.split('/')[1]\r\n          this.getArticlesData(cate)\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@color8: #888;\r\n@colorf2: #f2f2f2;\r\n.box-card {\r\n  width: 100%;\r\n  height: 100%;\r\n  box-shadow: none;\r\n  border: none;\r\n  padding: 0;\r\n  img {\r\n    width: 60px;\r\n    height: 60px;\r\n  }\r\n  .el-card__body {\r\n    & > div {\r\n      cursor: pointer;\r\n      border-bottom: 1px solid @colorf2;\r\n      &:last-child {\r\n        border-bottom: none;\r\n      }\r\n      &:hover {\r\n        background: #fafafa\r\n      }\r\n    }\r\n  }\r\n  h2 {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    line-height: 56px;\r\n    &:hover {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n}\r\ntime,\r\n.readNums {\r\n  font-size: 15px;\r\n  color: #888;\r\n}\r\n.readNums {\r\n  margin-left: 10px;\r\n}\r\n.el-pagination {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/main/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"box-card\"},[_vm._l((_vm.articles),function(article){return _c('el-row',{key:article._id,attrs:{\"type\":\"flex\",\"justify\":\"space-between\",\"align\":\"middle\"}},[_c('router-link',{staticStyle:{\"width\":\"100%\"},attrs:{\"tag\":\"div\",\"to\":{ path: '/article/' + article._id }}},[_c('el-col',{attrs:{\"span\":18}},[_c('h2',{staticClass:\"ellipsis\"},[_vm._v(_vm._s(article.title))]),_vm._v(\" \"),_c('time',[_vm._v(_vm._s(article.pubTime))]),_vm._v(\" \"),_c('span',{staticClass:\"readNums\"},[_c('i',{staticClass:\"el-icon-view\"}),_vm._v(\" \"+_vm._s(article.scan))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[(article.imgs && article.imgs[0])?_c('img',{attrs:{\"src\":article.imgs[0],\"alt\":\"\"}}):_vm._e()])],1)],1)}),_vm._v(\" \"),_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.count > 10),expression:\"count > 10\"}],attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.count},on:{\"current-change\":_vm.pageChange}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-e73ec0e4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/main/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e73ec0e4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e73ec0e4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e73ec0e4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/main/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}